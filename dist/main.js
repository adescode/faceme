(()=>{"use strict";var n={389:(n,e,t)=>{t.d(e,{Z:()=>s});var o=t(81),i=t.n(o),a=t(645),r=t.n(a)()(i());r.push([n.id,"body {\n  font-family: sans-serif;\n  background-color: #000;\n}\n\n.container {\n  width: 100%;\n  height: auto;\n  background-color: #000;\n  margin: 0 auto;\n}\n\n.message-div {\n  display: none;\n  flex-direction: column;\n  /* background-color: #fff; */\n  position: absolute;\n  bottom: 0;\n  max-height: 40%;\n  min-width: 100%;\n  margin: 0;\n  padding: 0;\n  z-index: 1;\n}\n\n.chat-message-list {\n  max-width: 50%;\n  margin: 0;\n  padding: 0;\n  background-color: #00000014;\n  overflow-y: scroll;\n}\n\nul.striped-list {\n  list-style-type: none;\n  margin: 0;\n  padding: 0;\n}\nul.striped-list > li {\n  text-shadow: 0px 0px 2px rgba(0, 0, 0, 0.74);\n  color: white;\n  padding: 6px;\n  font: message-box;\n}\n\n.chat-div {\n  width: 100%;\n}\n\ninput.chat-input::placeholder {\n  /* text-shadow: 0px 0px 2px rgba(0, 0, 0, 0.74); */\n  color: #040000;\n  opacity: 1; /* Firefox */\n}\n\ninput.chat-input:-ms-input-placeholder {\n  /* Internet Explorer 10-11 */\n  /* text-shadow: 0px 0px 2px rgba(0, 0, 0, 0.74); */\n  color: #040000;\n}\n\ninput.chat-input::-ms-input-placeholder {\n  /* Microsoft Edge */\n  /* text-shadow: 0px 0px 2px rgba(0, 0, 0, 0.74); */\n  color: #040000;\n}\ninput.chat-input {\n  margin: 2px 0;\n  padding: 5px;\n  border: none;\n  border-bottom: 2px solid #040000;\n  background-color: #f9f7f73d;\n  width: 70%;\n  outline: none;\n}\n\nbutton.chat-send-button {\n  width: 30%;\n  padding: 5px;\n  margin: 2px 0;\n  border: none;\n  border-bottom: 2px solid #040000;\n  border-left: 2px solid #040000;\n  background-color: #f9f7f73d;\n  outline: none;\n}\n\n.video-container1 {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  max-width: 600px;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  z-index: 1;\n  margin: 0 auto;\n  padding: 0;\n}\n\n.video-container1 .video1 {\n  min-width: 100%;\n  min-height: 100%;\n  width: auto;\n  height: auto;\n  padding: 0;\n}\n\n.video-container2, .video-container3 {\n  position: absolute;\n  top: 0;\n  padding: 0;\n  margin: 0;\n  min-width: 40%;\n  min-height: 40%;\n  overflow: hidden;\n  z-index: 2;\n}\n.video-container3 {\n  right: 0;\n}\n\n.videoTransform {\n  transform: rotateY(180deg) translate(25%, 0%);\n  -webkit-transform: rotateY(180deg) translate(25%, 0%);\n  -moz-transform: rotateY(180deg) translate(25%, 0%);\n}\n\n.video-container2 .video2{\n  float: left;\n  transition: ease-in;\n}\n.video-container3 .video2{\n  float: right;\n  transition: ease-in;\n}\n\n.video-container1 .video2 {\n  max-width: 100px;\n  height: auto;\n  padding: 0;\n  margin: 0;\n}\n\n.control {\n  display: flex;\n  justify-content: center;\n  position: absolute;\n  bottom: 30px;\n  width: 100%;\n  overflow: hidden;\n  z-index: 3;\n}\n\n.timer {\n  display: none;\n  justify-content: center;\n  position: absolute;\n  top: 30px;\n  width: 100%;\n  overflow: hidden;\n  /* background-color: #00000014; */\n  z-index: 3;\n}\n\n.minutes, .seconds, .colon {\n  text-shadow: 0px 0px 2px rgba(0, 0, 0, 0.74);\n  color: white;\n  padding: 3px;\n  font: message-box;\n}\n\n#closeButton {\n  display: none;\n}\n\n.fa {\n  padding: 20px;\n  font-size: 30px;\n  width: 70px;\n  text-align: center;\n  text-decoration: none;\n  margin: 5px 2px;\n  border-radius: 50%;\n}\n\n.fa-close {\n  background: #e61d1d;\n  color: white;\n}\n\n/* video {\n  width: 100%;\n  height: auto;\n} */\n\n.page {\n  position: absolute;\n  height: 100%;\n  margin: 0;\n  padding: 0;\n  width: 100%;\n  z-index: 4;\n}\n\n/* Login Page */\n\n.login.page {\n  background-color: #000;\n}\n\n.login.page .form {\n  height: 100px;\n  margin-top: -100px;\n  position: absolute;\n\n  text-align: center;\n  top: 50%;\n  width: 100%;\n}\n\n.login.page .form .usernameInput {\n  background-color: transparent;\n  border: none;\n  border-bottom: 2px solid #fff;\n  outline: none;\n  padding-bottom: 15px;\n  text-align: center;\n  max-width: 400px;\n  width: 100%;\n}\n\n.login.page .title {\n  font-size: 200%;\n}\n\n.login.page .usernameInput {\n  font-size: 200%;\n  letter-spacing: 3px;\n}\n\n.login.page .title,\n.login.page .usernameInput {\n  color: #fff;\n  font-weight: 100;\n}\n\n@media only screen and (min-width: 800px) {\n\n  .video-container1 {\n    max-width: 600px;\n    min-width: 600px;\n    height: 100%;\n  }\n\n  .video-container1 .video1 {\n    min-width: 800px;\n    min-height: 100%;\n  }\n\n  .video-container1 .video2 {\n    max-width: 230px;\n    height: auto;\n  }\n\n}\n",""]);const s=r},740:(n,e,t)=>{t.d(e,{Z:()=>s});var o=t(81),i=t.n(o),a=t(645),r=t.n(a)()(i());r.push([n.id,"html {\n  box-sizing: border-box;\n}\n*,\n*:before,\n*:after {\n  box-sizing: inherit;\n}\n/* Extract from normalize.css by Nicolas Gallagher and Jonathan Neal git.io/normalize */\nhtml {\n  -ms-text-size-adjust: 100%;\n  -webkit-text-size-adjust: 100%;\n}\nbody {\n  margin: 0;\n}\narticle,\naside,\ndetails,\nfigcaption,\nfigure,\nfooter,\nheader,\nmain,\nmenu,\nnav,\nsection {\n  display: block;\n}\nsummary {\n  display: list-item;\n}\naudio,\ncanvas,\nprogress,\nvideo {\n  display: inline-block;\n}\nprogress {\n  vertical-align: baseline;\n}\naudio:not([controls]) {\n  display: none;\n  height: 0;\n}\n[hidden],\ntemplate {\n  display: none;\n}\na {\n  background-color: transparent;\n}\na:active,\na:hover {\n  outline-width: 0;\n}\nabbr[title] {\n  border-bottom: none;\n  text-decoration: underline;\n  text-decoration: underline dotted;\n}\nb,\nstrong {\n  font-weight: bolder;\n}\ndfn {\n  font-style: italic;\n}\nmark {\n  background: #ff0;\n  color: #000;\n}\nsmall {\n  font-size: 80%;\n}\nsub,\nsup {\n  font-size: 75%;\n  line-height: 0;\n  position: relative;\n  vertical-align: baseline;\n}\nsub {\n  bottom: -0.25em;\n}\nsup {\n  top: -0.5em;\n}\nfigure {\n  margin: 1em 40px;\n}\nimg {\n  border-style: none;\n}\ncode,\nkbd,\npre,\nsamp {\n  font-family: monospace, monospace;\n  font-size: 1em;\n}\nhr {\n  box-sizing: content-box;\n  height: 0;\n  overflow: visible;\n}\nbutton,\ninput,\nselect,\ntextarea,\noptgroup {\n  font: inherit;\n  margin: 0;\n}\noptgroup {\n  font-weight: bold;\n}\nbutton,\ninput {\n  overflow: visible;\n}\nbutton,\nselect {\n  text-transform: none;\n}\nbutton,\n[type='button'],\n[type='reset'],\n[type='submit'] {\n  -webkit-appearance: button;\n}\nbutton::-moz-focus-inner,\n[type='button']::-moz-focus-inner,\n[type='reset']::-moz-focus-inner,\n[type='submit']::-moz-focus-inner {\n  border-style: none;\n  padding: 0;\n}\nbutton:-moz-focusring,\n[type='button']:-moz-focusring,\n[type='reset']:-moz-focusring,\n[type='submit']:-moz-focusring {\n  outline: 1px dotted ButtonText;\n}\nfieldset {\n  border: 1px solid #c0c0c0;\n  margin: 0 2px;\n  padding: 0.35em 0.625em 0.75em;\n}\nlegend {\n  color: inherit;\n  display: table;\n  max-width: 100%;\n  padding: 0;\n  white-space: normal;\n}\ntextarea {\n  overflow: auto;\n}\n[type='checkbox'],\n[type='radio'] {\n  padding: 0;\n}\n[type='number']::-webkit-inner-spin-button,\n[type='number']::-webkit-outer-spin-button {\n  height: auto;\n}\n[type='search'] {\n  -webkit-appearance: textfield;\n  outline-offset: -2px;\n}\n[type='search']::-webkit-search-decoration {\n  -webkit-appearance: none;\n}\n::-webkit-file-upload-button {\n  -webkit-appearance: button;\n  font: inherit;\n}\n/* End extract */\n",""]);const s=r},645:n=>{n.exports=function(n){var e=[];return e.toString=function(){return this.map((function(e){var t="",o=void 0!==e[5];return e[4]&&(t+="@supports (".concat(e[4],") {")),e[2]&&(t+="@media ".concat(e[2]," {")),o&&(t+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),t+=n(e),o&&(t+="}"),e[2]&&(t+="}"),e[4]&&(t+="}"),t})).join("")},e.i=function(n,t,o,i,a){"string"==typeof n&&(n=[[null,n,void 0]]);var r={};if(o)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(r[l]=!0)}for(var d=0;d<n.length;d++){var c=[].concat(n[d]);o&&r[c[0]]||(void 0!==a&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=a),t&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=t):c[2]=t),i&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=i):c[4]="".concat(i)),e.push(c))}},e}},81:n=>{n.exports=function(n){return n[1]}},379:n=>{var e=[];function t(n){for(var t=-1,o=0;o<e.length;o++)if(e[o].identifier===n){t=o;break}return t}function o(n,o){for(var a={},r=[],s=0;s<n.length;s++){var l=n[s],d=o.base?l[0]+o.base:l[0],c=a[d]||0,u="".concat(d," ").concat(c);a[d]=c+1;var p=t(u),m={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==p)e[p].references++,e[p].updater(m);else{var g=i(m,o);o.byIndex=s,e.splice(s,0,{identifier:u,updater:g,references:1})}r.push(u)}return r}function i(n,e){var t=e.domAPI(e);return t.update(n),function(e){if(e){if(e.css===n.css&&e.media===n.media&&e.sourceMap===n.sourceMap&&e.supports===n.supports&&e.layer===n.layer)return;t.update(n=e)}else t.remove()}}n.exports=function(n,i){var a=o(n=n||[],i=i||{});return function(n){n=n||[];for(var r=0;r<a.length;r++){var s=t(a[r]);e[s].references--}for(var l=o(n,i),d=0;d<a.length;d++){var c=t(a[d]);0===e[c].references&&(e[c].updater(),e.splice(c,1))}a=l}}},569:n=>{var e={};n.exports=function(n,t){var o=function(n){if(void 0===e[n]){var t=document.querySelector(n);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(n){t=null}e[n]=t}return e[n]}(n);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}},216:n=>{n.exports=function(n){var e=document.createElement("style");return n.setAttributes(e,n.attributes),n.insert(e,n.options),e}},565:(n,e,t)=>{n.exports=function(n){var e=t.nc;e&&n.setAttribute("nonce",e)}},795:n=>{n.exports=function(n){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=n.insertStyleElement(n);return{update:function(t){!function(n,e,t){var o="";t.supports&&(o+="@supports (".concat(t.supports,") {")),t.media&&(o+="@media ".concat(t.media," {"));var i=void 0!==t.layer;i&&(o+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),o+=t.css,i&&(o+="}"),t.media&&(o+="}"),t.supports&&(o+="}");var a=t.sourceMap;a&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleTagTransform(o,n,e.options)}(e,n,t)},remove:function(){!function(n){if(null===n.parentNode)return!1;n.parentNode.removeChild(n)}(e)}}}},589:n=>{n.exports=function(n,e){if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}}},e={};function t(o){var i=e[o];if(void 0!==i)return i.exports;var a=e[o]={id:o,exports:{}};return n[o](a,a.exports,t),a.exports}t.n=n=>{var e=n&&n.__esModule?()=>n.default:()=>n;return t.d(e,{a:e}),e},t.d=(n,e)=>{for(var o in e)t.o(e,o)&&!t.o(n,o)&&Object.defineProperty(n,o,{enumerable:!0,get:e[o]})},t.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),t.nc=void 0,(()=>{var n=t(379),e=t.n(n),o=t(795),i=t.n(o),a=t(569),r=t.n(a),s=t(565),l=t.n(s),d=t(216),c=t.n(d),u=t(589),p=t.n(u),m=t(389),g={};g.styleTagTransform=p(),g.setAttributes=l(),g.insert=r().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=c(),e()(m.Z,g),m.Z&&m.Z.locals&&m.Z.locals;var f=t(740),h={};h.styleTagTransform=p(),h.setAttributes=l(),h.insert=r().bind(null,"head"),h.domAPI=i(),h.insertStyleElement=c(),e()(f.Z,h),f.Z&&f.Z.locals&&f.Z.locals;let v=document.getElementById("minutes"),b=document.getElementById("seconds"),x=0;function y(){++x,b.innerHTML=w(x%60),v.innerHTML=w(parseInt(x/60))}function w(n){let e=n+"";return e.length<2?"0"+e:e}const k=function(){setInterval(y,1e3)};let T,C,E,z,I,S=!1,L=!1,M=!1,j=io.connect(),D=$(window),R=($("#m"),$(".login.page")),A=($(".inputMessage"),$(".usernameInput").focus(),{iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun.l.google.com:19305"},{urls:"stun:stun1.l.google.com:19305"},{urls:"stun:stun2.l.google.com:19305"},{urls:"stun:stun3.l.google.com:19305"},{urls:"stun:stun4.l.google.com:19305"},{urls:"turn:numb.viagenie.ca",credential:"TkLK99Fe!WLdXnk",username:"adelaja444@gmail.com"}]}),B=document.querySelector("#localVideo"),O=document.querySelector("#remoteVideo"),P=document.getElementById("closeButton"),Z=document.getElementById("videoContainer2"),N=document.getElementById("videoContainer3"),F=document.getElementById("room");function H(n){n.preventDefault()}function q(n){n.preventDefault();let e=n.dataTransfer.getData("text");n.target.appendChild(document.getElementById(e))}function G(n){console.log("Client sending message: ",n,F.value),j.emit("message",{msg:n,room:F.value,id:I})}function U(){console.log(">>>>>>> maybeStart() ",M,T,S),!M&&void 0!==T&&S&&(console.log(">>>>>> creating peer connection"),function(){try{C=new RTCPeerConnection(A),C.onicecandidate=K,C.onaddstream=X,C.onremovestream=_,console.log("Created RTCPeerConnnection")}catch(n){return console.log("Failed to create PeerConnection, exception: "+n.message),void alert("Cannot create RTCPeerConnection object.")}}(),C.addStream(T),M=!0,console.log("isInitiator",L),L&&(console.log("Sending offer to peer"),C.createOffer(J,Y)))}function K(n){console.log("icecandidate event: ",n),n.candidate?G({type:"candidate",label:n.candidate.sdpMLineIndex,id:n.candidate.sdpMid,candidate:n.candidate.candidate}):console.log("End of candidates.")}function Y(n){console.log("createOffer() error: ",n)}function J(n){C.setLocalDescription(n),console.log("setLocalAndSendMessage sending message",n),G(n)}function V(n){trace("Failed to create session description: "+n.toString())}function X(n){console.log("Remote stream added."),E=n.stream,O.srcObject=T,B.srcObject=E,B.muted=!B.muted,$("#remoteVideo").addClass("videoTransform"),$("#messageDiv").css("display","flex"),$("#timer").css("display","flex"),$("#container").css("display","block"),k()}function _(n){console.log("Remote stream removed. Event: ",n)}function W(){console.log("stoooop........."),C?(P.style.display="none",window.location.reload(),M=!1,C.close(),C=null):window.location.reload()}P.addEventListener("click",(n=>{n.preventDefault(),console.log("Hanging up."),W(),G("bye")})),D.keydown((n=>{console.log("event.key.....",n.key),n.ctrlKey||n.metaKey||n.altKey||F.focus(),"Enter"==n.key&&(C?$("form").submit((function(n){return n.preventDefault(),""!==$("#m").val()&&null!==$("#m").val()&&j.emit("chat message",{msg:$("#m").val(),room:F.value}),$("#m").val(""),!1})):function(){let n=document.getElementById("room").value;""!==n&&null!==n&&(navigator.mediaDevices?.enumerateDevices||(console.log("enumerateDevices() not supported."),alert("enumerate"),navigator.permissions.query({name:"geolocation"}).then((n=>{"granted"===n.state?alert("granted"):"prompt"===n.state?alert("prompt"):alert(n.state)}))),navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).then((n=>{alert("stream"),function(n){alert("local steaam"),console.log("Adding local stream."),T=n,B.srcObject=n,P.style.display="block",G("got user media"),L&&U()}(n)})).catch((function(n){alert("getUserMedia() error: "+n.name)})),j.emit("create or join",n),console.log("Attempted to create or  join room",n),R.fadeOut(),$(".container").show(),R.off("click"))}())})),$("form").submit((function(n){return n.preventDefault(),C&&""!==$("#m").val()&&null!==$("#m").val()&&j.emit("chat message",{msg:$("#m").val(),room:F.value}),$("#m").val(""),!1})),Z.addEventListener("drop",q),N.addEventListener("drop",q),Z.addEventListener("dragover",H),N.addEventListener("dragover",H),O.addEventListener("dragstart",(function(n){n.dataTransfer.setData("text",n.target.id)})),j.on("chat message",(function(n){console.log("'chat message', function (msg) ",n);let e=document.getElementById("chatMessageList");const t=n.id===I?`You: ${n.msg}`:`Friend: ${n.msg}`;$("#messages").append($("<li>").text(t)),e.scrollTop=e.scrollHeight})),j.on("created",(function(n,e){console.log("Created room "+n+e),I=e,L=!0})),j.on("full",(function(n){console.log("Room "+n+" is full"),alert("Room is not available try again"),window.location.reload()})),j.on("join",(function(n){console.log("Another peer made a request to join room "+n),console.log("This peer is the initiator of room "+n+"!"),S=!0})),j.on("joined",(function(n,e){console.log("joined: "+n,e),I=e,S=!0})),j.on("log",(function(n){})),j.on("message",(function(n){const e=n.msg;if(console.log("Client received message:",n),n.id!==I)if("got user media"===e)U();else if("offer"===e.type)L||M||U(),C.setRemoteDescription(new RTCSessionDescription(e)),console.log("Sending answer to peer."),C.createAnswer().then(J,V);else if("answer"===e.type&&M)C.setRemoteDescription(new RTCSessionDescription(e));else if("candidate"===e.type&&M){let n=new RTCIceCandidate({sdpMLineIndex:e.label,candidate:e.candidate});C.addIceCandidate(n)}else"bye"===e&&M&&(console.log("Session terminated."),W(),L=!1)})),console.log("Getting user media wiwth constraints",{video:!0},"location.hostname"),console.log("Getting location.hostname",location.hostname),"localhost"!==location.hostname&&function(n){let e=!1;console.log("pcConfig.iceServers");for(let n in A.iceServers)if("turn:"===A.iceServers[n].urls.substr(0,5)){e=!0,z=!0;break}if(!e){console.log("Getting TURN server from ",n);let e=new XMLHttpRequest;e.onreadystatechange=function(){if(4===e.readyState&&200===e.status){let n=JSON.parse(e.responseText);console.log("Got TURN server: ",n),A.iceServers.push({urls:"turn:"+n.username+"@"+n.turn,credential:n.password}),z=!0}},e.open("GET",n,!0),e.send()}}("https://computeengineondemand.appspot.com/turn?username=41784574&key=4080218913"),window.onbeforeunload=function(){C&&G("bye")},$(document).ready((function(){$(".preloader").fadeOut("slow"),R.show()}))})()})();